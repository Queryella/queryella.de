<div class="container-fluid">
    <div class="container">
      <nav class="navbar navbar-expand-lg justify-content-between align-items-start pt-3" aria-label="Main Navigation">
        <a class="navbar-brand" href="{{ .Site.BaseURL | absLangURL }}">
          {{ $theme := .Page.Params.theme }}
          {{ $type := .Page.Type }}
          {{ $home := .IsHome }}
          <img src="/img/logo.svg" alt="Querylla logo">
        </a>
        <button class="navbar-toggler" type="button" aria-label="Toggle navigation" onclick="openNav()">
          <i class="fa-solid fa-grip-lines"></i>
        </button>
        <div class="collapse navbar-collapse flex-grow-0">
          <ul class="navbar-nav">
            <!-- <li class="nav-item ms-4">
              <a class="nav-link"  href="#">Solutions <span class="drop-icon" for="Solutions">▾</span></a>
                {{ $products := where .Site.RegularPages "Type" "solutions"}}
                  <ul class="sub-menu">
                    {{ range $products }}
                      <li>
                        <a class="nav-link " href="{{ .Permalink }}">{{ .Title }}</a>
                      </li>
                      {{ end }}
                  </ul>
                
            </li> -->
            {{- $firstUrlElement := print "/" (index (split .RelPermalink "/") 1) "/" -}}
            {{- range .Site.Menus.main -}}
            
            <li class="nav-item ms-4">
              {{ if .HasChildren }}
              <a class="nav-link {{ if eq ($firstUrlElement|lower) (.URL|lower) }}active{{end}}" {{ if eq
                ($firstUrlElement|lower) (.URL|lower) }}aria-current="page" {{end}} for="{{ .Name }}1" >{{ .Name }} <label class="drop-icon" for="{{ .Name }}1">▾</label> </a>
                {{ else }}
                <a class="nav-link {{ if eq ($firstUrlElement|lower) (.URL|lower) }}active{{end}}" {{ if eq
                  ($firstUrlElement|lower) (.URL|lower) }}aria-current="page" {{end}} href="{{ .URL | absLangURL }}">{{ .Name }} </a>
                {{ end }}
                {{ if .HasChildren }}
                
                <input type="checkbox" id="{{ .Name }}1">
                  <ul class="sub-menu">
                      {{ range .Children }}
                      <li >
                        <a class="nav-link {{ if eq ($firstUrlElement|lower) (.URL|lower) }}active{{end}}" {{ if eq
                          ($firstUrlElement|lower) (.URL|lower) }}aria-current="page" {{end}} href="{{ .URL | absLangURL }}">{{ .Name }}</a>
                      </li>
                      {{ end }}
                  </ul>
                {{ end }}
            </li>
          
            {{ end }}
            <!-- {{ if .Site.IsMultiLingual }}
              {{ partial "langswitcher_dropdown.html" . }} {{ end }} -->
            <li class="nav-item ms-4 nav-item-lang"></li>
              <a href="/request-a-demo/" class="bnt main-bnt">Request a Demo</a>
            </li>

          </ul>
        </div>
      </nav>
      <div id="navbar-mobile" class="navbar-mobile overlay d-block d-lg-none" {{ if .Params.background }}style="background-color: {{ .Params.background }};"{{ else }}{{ end }}>
        <div class="container-fluid">
          <div class="container py-3">
            <div class="navbar align-items-center justify-content-between">
              <a class="brand" href="{{ .Site.BaseURL }}">
                  <img src="/img/svg/logo-white.svg" alt="Querylla logo" width="209">
              </a>
              <button type="button" class="closebtn" aria-label="Toggle navigation" onclick="closeNav()"><i class='fa-solid fa-xmark {{ if eq $theme "dark" }}text-white{{ else if eq $theme "light" }}text-dark{{ else }}{{ end }}'></i></button>
          </div>
        </div>
        <div class="overlay-content">
            <div class="container pt-4">
              {{- $firstUrlElement := print "/" (index (split .RelPermalink "/") 1) "/" -}}
              <ul class="menu__list">
                <!-- <li class="menu__item menu__dropdown menu__link">
                  <a href="#"><span class="menu__text">Products</span> <label class="drop-icon" for="Products">▾</label></a>
                  <input type="checkbox" id="Products">
                {{ $products := where .Site.RegularPages "Type" "products"}}
                  <ul class="sub-menu">
                    {{ range $products }}
                      <li>
                          <a class="nav-link" aria-current="page" href="{{ .Permalink }}">{{ .Title }}</a>
                        
                      </li>
                      {{ end }}
                  </ul>
                </li> -->
              {{- range .Site.Menus.main -}}
              
              <li class="menu__item menu__dropdown menu__link">
                <a href="{{ .URL | absLangURL }}">
                  <span class="menu__text">{{ .Name }}</span>
                  {{ if .HasChildren }}<label class="drop-icon" for="{{ .Name }}">▾</label>{{ else }}   <label class="drop-icon invisible" for="{{ .Name }}">.</label> {{ end }}
                </a>
              
                <input type="checkbox" id="{{ .Name }}">
                {{ if .HasChildren }}
                
                  <ul class="sub-menu">
                      {{ range .Children }}
                      <li >
                        <a class="nav-link {{ if eq ($firstUrlElement|lower) (.URL|lower) }}active{{end}}" {{ if eq
                          ($firstUrlElement|lower) (.URL|lower) }}aria-current="page" {{end}} href="{{ .URL | absLangURL }}">{{ .Name }}</a>
                      </li>
                      {{ end }}
                  </ul>
                {{ end }}
              </li>
              {{ end }}
              <li class="menu__item menu__dropdown menu__link"> 
                <!-- {{ if .Site.IsMultiLingual }}
              {{ partial "langswitcher_dropdown_mobile.html" . }} {{ end }} -->
              </li>
            </ul>
             
              
            </div>
        </div>
      </div>
    </div>
  </div>
</div>
  
  <script>
  function openNav() {
    document.getElementById("navbar-mobile").style.height = "100%";
    document.getElementById("navbar-mobile").style.width = screen.width + "px";
  }
  function closeNav() {
    document.getElementById("navbar-mobile").style.height = "0%";
  }


  const allInputs = document.querySelectorAll(".navbar-nav input");

  allInputs.forEach(input => {
    input.addEventListener("click", e => {
      if (e.target.checked) {
        e.target.parentElement.style.background = "#fff";
        e.target.parentElement.parentElement.style.background = "linear-gradient(180deg, #eef2ff 42.5%, transparent 0)";
      } else {
        e.target.parentElement.style.background = "transparent";
        e.target.parentElement.parentElement.style.background = "linear-gradient(180deg, #eef2ff 100%, transparent 0)";
      }
    })
  })

  </script>
  